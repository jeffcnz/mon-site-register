
{% extends "api_custom.html" %}

{% block request_info %}

{% if type == 'FeatureCollection' %}
<div>
  <table class="table">
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Latitude</th>
      <th>Longitude</th>
    </tr>

    {% for feature in features %}
    <tr class="Feature" vocab="http://schema.org/" typeof="Place" resource="#{% url 'apisite-detail' feature.id %}">
      <td property="identifier"><a href="{% url 'apisite-detail' feature.id %}">{{ feature.id }}</a></td>
      <td property="name">{{ feature.properties.site_name }}</td>
      <td property="latitude">{{ feature.geometry.coordinates.0 }}</td>
      <td property="longitude">{{ feature.geometry.coordinates.1 }}</td>
    </tr>
    {% endfor %}
  </table>
</div>


{% elif type == 'Feature' %}
  <div class="Feature" vocab="http://schema.org/" typeof="Place" resource="#{% url 'apisite-detail' id %}">
  <table class="table">
    <tr>
      <th>ID</th>
      <td property="identifier">{{ id }}</td>
    </tr>
    <tr>
      <th>Name</th>
      <td property="name">{{ properties.site_name }}</td>
    </tr>
    <tr>
      <td>Location</td>
      <td property="GeoCoordinates">{{ geometry.coordinates }}</td>
    </tr>
  </table>

  <h3>Other Identifiers</h3>
  <table class="table">
    <tr>
      <th>Identifier</th>
      <th>Type</th>
    </tr>
    {% for ident in properties.site_identifiers %}
    <tr property="sameAs" typeof="PropertyValue">
      <td property="value">{{ ident.identifier }}</td>
      <td property="propertyID">{{ ident.identifier_name }}</td>
    </tr>
    {% endfor %}
  </table>

  <h3>Operating Agencies</h3>
  <table class="table">
    <tr>
      <th>Agency</th>
      <th>From</th>
      <th>To</th>
    </tr>
    {% for a in properties.site_agencies %}
    <tr property=agent typeof=Organisation>
      <td property="name"><a property="mainEntityOfPage" typeof="URL" href="https://{{ a.agency.website }}">{{ a.agency_name }}</a></td>
      <td property="startTime">{{ a.from_date }}</td>
      <td property="endTime">{{ a.to_date }}</td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endif %}
{% endblock %}
